!function(e){function t(t){for(var a,s,o=t[0],l=t[1],u=t[2],d=0,p=[];d<o.length;d++)s=o[d],i[s]&&p.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(c&&c(t);p.length;)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={0:0},r=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;r.push([66,1]),n()}({12:function(e,t,n){var a=n(35);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(11).default)("5a82c5e1",a,!1,{})},13:function(e,t,n){var a=n(55);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(11).default)("3048d715",a,!1,{})},14:function(e,t,n){var a=n(57);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(11).default)("ad4bf8e8",a,!1,{})},15:function(e,t,n){var a=n(65);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n(11).default)("d0ecfc52",a,!1,{})},20:function(e,t){e.exports=dashjs},33:function(e,t,n){e.exports=n.p+"3bab9ce5393d511d0e82248f5d507b50.svg"},34:function(e,t,n){"use strict";var a=n(12);n.n(a).a},35:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 1em;\n}\n#logo {\n  width: 5em;\n  margin-bottom: 0.2em;\n}\na {\n  color: #42b983;\n  text-decoration: none;\n}\n",""])},53:function(e,t,n){e.exports=n.p+"88bd6a588ceacf35ce5bcbcb8894f460.png"},54:function(e,t,n){"use strict";var a=n(13);n.n(a).a},55:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"\nh1[data-v-6e5ac9e4], h2[data-v-6e5ac9e4] {\n  font-weight: normal;\n}\nul[data-v-6e5ac9e4] {\n  list-style-type: none;\n  padding: 0;\n}\nli[data-v-6e5ac9e4] {\n  display: inline-block;\n  margin: 0 10px;\n}\na[data-v-6e5ac9e4] {\n  color: #42b983;\n}\n.media[data-v-6e5ac9e4] {\n  position: relative;\n  width: 15em;\n  margin-left: auto;\n  margin-right: auto;\n}\n.pthumb[data-v-6e5ac9e4] {\n  width: 15em;\n  position: relative;\n  z-index: 0;\n}\n.picon[data-v-6e5ac9e4] {\n  width: 4em;\n  left: 5.6em;\n  bottom: 2.2em;\n  position: absolute;\n  cursor: pointer;\n  z-index: 1;\n}\n",""])},56:function(e,t,n){"use strict";var a=n(14);n.n(a).a},57:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"\nh1[data-v-6bfba033], h2[data-v-6bfba033] {\n  font-weight: normal;\n}\nul[data-v-6bfba033] {\n  list-style-type: none;\n  padding: 0;\n}\nli[data-v-6bfba033] {\n  display: inline-block;\n  margin: 0 10px;\n}\na[data-v-6bfba033] {\n  color: #42b983;\n}\n",""])},64:function(e,t,n){"use strict";var a=n(15);n.n(a).a},65:function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"\nh1[data-v-46127d64], h2[data-v-46127d64] {\n  font-weight: normal;\n}\nul[data-v-46127d64] {\n  list-style-type: none;\n  padding: 0;\n}\nli[data-v-46127d64] {\n  display: inline-block;\n  margin: 0 10px;\n}\na[data-v-46127d64] {\n  color: #42b983;\n}\n.playbody[data-v-46127d64] {\n  margin-left: 2em;\n  margin-right: 2em;\n}\n",""])},66:function(e,t,n){"use strict";n.r(t);var a=n(8),i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("img",{attrs:{src:n(33),id:"logo"}}),this._v(" "),t("div",[t("router-link",{attrs:{to:"/"}},[this._v("Home")]),this._v(" | \r\n        "),t("router-link",{attrs:{to:"/uploader"}},[this._v("Uploader")]),this._v(" |\r\n        "),t("router-link",{attrs:{to:"/working"}},[this._v("Working")])],1),this._v(" "),t("router-view")],1)};i._withStripped=!0;var r={name:"app"},s=(n(34),n(3)),o=Object(s.a)(r,i,[],!1,null,null,null);o.options.__file="src/App.vue";var l=o.exports,u=n(19),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Assets"},[n("h3",[e._v("Media")]),e._v(" "),e.assets&&e.assets.length?n("div",e._l(e.assets,function(t,a){return n("Media",{key:t.mediaid,tag:"div",attrs:{mediaid:t.id,idx:a,filter:e.filter}})})):e._e(),e._v(" "),e.assets.length||"ok"!=e.filter?e._e():n("Uploader"),e._v(" "),e.errors&&e.errors.length?n("ul",e._l(e.errors,function(t){return n("li",{key:t.message},[e._v("\n          "+e._s(t.message)+"\n        ")])})):e._e()],1)};c._withStripped=!0;var d=n(7),p=n.n(d),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"ok"==e.status&&"ok"==e.filter||"ok"!=e.status&&"working"==e.filter?a("div",{staticClass:"media"},[a("h3",[e._v(e._s(e.name))]),e._v(" "),"ok"!=e.filter?a("p",[e._v(e._s(e.id)+" - "+e._s(e.status))]):e._e(),e._v(" "),e.thumb&&e.thumb.length?a("img",{staticClass:"pthumb",attrs:{src:e.imgurl}}):e._e(),e._v(" "),e.dash||e.hls3?a("img",{staticClass:"picon",attrs:{src:n(53)},on:{click:function(t){e.play()}}}):e._e(),e._v(" "),e.errors&&e.errors.length?a("ul",e._l(e.errors,function(t){return a("li",[e._v("\n          "+e._s(t.message)+"\n        ")])})):e._e()]):e._e()};h._withStripped=!0;var v="/play",f={name:"Media",props:["mediaid","idx","filter"],data:function(){return{status:null,name:null,id:null,owner:null,hls3:null,dash:null,thumb:[],hls4:null,playready:null,widevine:null,errors:[],play:function(){J.push({name:"Play",params:{id:this.mediaid}})}}},created:function(){var e=this;p.a.get("/api/status/"+this.mediaid).then(function(t){e.status=t.data.status,e.owner=t.data.owner,e.dash=t.data.dash,e.hls3=t.data.hls3,e.thumb=t.data.thumb,e.name=t.data.name,e.id=e.mediaid}).catch(function(t){e.errors.push(t)})},computed:{imgurl:function(){return v+"/"+this.owner+"/"+this.id+"/"+this.thumb[1]}}},y=(n(54),Object(s.a)(f,h,[],!1,null,"6e5ac9e4",null));y.options.__file="src/components/Media.vue";var m={name:"Assets",props:["filter"],data:function(){return{assets:[],errors:[]}},components:{Media:y.exports},created:function(){var e=this;p.a.get("/api/list").then(function(t){e.assets=t.data.assets}).catch(function(t){e.errors.push(t)})}},g=(n(56),Object(s.a)(m,c,[],!1,null,"6bfba033",null));g.options.__file="src/components/Assets.vue";var b=g.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Play"},[n("h3",[e._v("Play "+e._s(e.name))]),e._v(" "),e._m(0),e._v(" "),e.errors&&e.errors.length?n("ul",e._l(e.errors,function(t){return n("li",{key:t.message},[e._v("\n          "+e._s(t.message)+"\n        ")])})):e._e()])};_._withStripped=!0;var w=n(1),k=n.n(w),E=n(2),S=n.n(E),x=n(4),T=n.n(x),M=n(5),A=n.n(M),P=n(6),O=n.n(P),j=n(16),R=Object.freeze({STARTED:"started",ERROR:"error"}),L=Object.freeze({STARTED:"started",ERROR:"error",PLAYER:"player",URL:"url"}),D=function(e){function t(){return k()(this,t),T()(this,A()(t).apply(this,arguments))}return O()(t,e),S()(t,[{key:"raiseEvent",value:function(e){this.emit(e)}},{key:"events",get:function(){return R}}]),t}(j.EventEmitter),C=n(20),H=n.n(C);var K=function(e){function t(e){var n;return k()(this,t),(n=T()(this,A()(t).call(this))).dashplayer=null,n}return O()(t,e),S()(t,[{key:"play",value:function(e,t,n,a){!function(e,t,n,a){var i=t;e.dashplayer=H.a.MediaPlayer().create();var r=document.querySelector("#"+n);null==a&&(a=!1),e.dashplayer.on(H.a.MediaPlayer.events.PLAYBACK_STARTED,function(){e.raiseEvent(e.events.STARTED)},null),e.dashplayer.initialize(r,i,a)}(this,e,t,a)}},{key:"pause",value:function(){this.dashplayer.pause()}},{key:"time",value:function(){return this.dashplayer.time()}},{key:"duration",get:function(){return this.dashplayer.duration()}},{key:"name",get:function(){return"dashjs"}}]),t}(D);var N=function(e){function t(e){var n;return k()(this,t),(n=T()(this,A()(t).call(this))).videoplayer=null,n}return O()(t,e),S()(t,[{key:"play",value:function(e,t,n,a){!function(e,t,n,a){var i=t;e.videoplayer=document.querySelector("#"+n),e.videoplayer.src=i,null==a&&(a=!1),e.videoplayer.onplay=function(){e.raiseEvent(e.events.STARTED)}}(this,e,t,a)}},{key:"pause",value:function(){this.videoplayer.pause()}},{key:"time",value:function(){var e=this.videoplayer.played;return e.length?e.end(e.length-1):0}},{key:"duration",get:function(){return this.videoplayer.duration}},{key:"name",get:function(){return"html5"}}]),t}(D);function $(e,t,n,a){var i=a._video;if("audio"===e)throw new Error("not supported");return!!(n&&"probably"===i.canPlayType(t)||!n&&""!==i.canPlayType(t))}var z=function(){function e(){k()(this,e),this.drm={},function(e){var t=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.4d401e"'}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}],n="org.w3.clearkey",a="com.microsoft.playready";window.MSMediaKeys&&window.MSMediaKeys.isTypeSupported&&(window.MSMediaKeys.isTypeSupported(n,t[0].videoCapabilities[0].contentType)?e[n]=!0:e[n]=!1,window.MSMediaKeys.isTypeSupported(a,t[0].videoCapabilities[0].contentType)?e[a]=!0:e[a]=!1),navigator.requestMediaKeySystemAccess&&(e[n]="calling",e[a]="calling",navigator.requestMediaKeySystemAccess(n,t).then(function(t){e[n]=!0}).catch(function(){e[n]=!1}),navigator.requestMediaKeySystemAccess(a,t).then(function(t){e[a]=!0}).catch(function(){e[a]=!1}))}(this.drm),this._video=document.createElement("video")}return S()(e,[{key:"Video5",value:function(){return!!this._video.canPlayType}},{key:"H264",value:function(e){var t="avc1.42E01E";e&&("main30"===e?t="avc1.4D401E":"high30"===e?t="avc1.64001E":"high40"===e?t="avc1.640028":"high50"===e&&(t="avc1.640032"));var n='video/mp4; codecs="'+t+',mp4a.40.2"';return!!this.Video5()&&$("video",n,!0,this)}},{key:"MediaExtension",value:function(){return!!("MediaSource"in window||"WebKitMediaSource"in window)}},{key:"HLSNative",value:function(){return!!this.Video5()&&$("video","application/vnd.apple.mpegurl",!1,this)}},{key:"flash",value:function(){var e=!1,t=null,n=[e,t],a=this.getUserAgent(),i=_isIE(a);if(i[0]&&i[1][0]<11)try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");n=[e=!0,t=_parsePluginDescription(r.GetVariable("$version"))]}catch(a){n=[e,t]}else if(this._plugins){r=nav.plugins["Shockwave Flash"];r&&(e=!0,r.version?t=_parsePluginVersion(r.version):r.description&&(t=_parsePluginDescription(r.description)),n=[e,t])}else if(this._mimeTypes){var r=nav.mimeTypes["application/x-shockwave-flash"];r&&r.enabledPlugin&&(e=!0,r.enabledPlugin.description&&(t=_parsePluginDescription(r.enabledPlugin.description)),n=[e,t])}return n}}]),e}(),I=n(29),U=n.n(I),V=n(30),q=n.n(V)()("mgplay:play");function F(e,t){return U()(t).absoluteTo(e).href()}var Y=new(function(e){function t(e){var n;k()(this,t);return(n=T()(this,A()(t).call(this))).options=Object.assign({autoplay:!0,id:"player",hostid:"playerhost",controls:!0,muted:!1},e),n.tag=null,n.player=null,n.detector=new z,n}return O()(t,e),S()(t,[{key:"_loadplayer",value:function(e,t,n){var a=function(e,t,n,a){var i=Object.assign({autoplay:!0,controls:!0,cssclass:null,muted:!1},a),r="<video ";return r+=' id="',r+=n,r+='" ',null!=i.cssclass?(r+=' class="',r+=i.cssclass,r+='" '):(r+=' style="',r+="width: 100%; height: auto;",r+='" '),i.controls&&(r+="controls"),null!=t&&(r+=' poster="',r+=t,r+='"'),1==i.autoplay&&(r+=" autoPlay"),1==i.muted&&(r+=" muted"),r+=">",null!=e&&(r+='<source src="',r+=escape(e),r+='" />'),q("HTML5 ELEMENT: ",r+="</video>"),r}(null,n,this.options.id,this.options);document.getElementById(this.options.hostid).innerHTML=a,this.player=e,function(e){e.player.on(e.player.events.STARTED,function(){return e.emit(e.events.STARTED)})}(this),this.emit(this.events.PLAYER,this.player.name),this.emit(this.events.URL,t),this.player.play(t,this.options.id,n,this.options.autoplay)}},{key:"playdash",value:function(e,t){if(!this.detector.MediaExtension())throw new Error("No MSE support detected");this._loadplayer(new K,e,t)}},{key:"playhls",value:function(e,t){if(this.detector.HLSNative())this._loadplayer(new N,e,t);else if(this.detector.MediaExtension())throw new Error("MSE HLS not supported yet")}},{key:"play",value:function(e,t){var n=null;if(Array.isArray(t.thumb)&&t.thumb.length){var a=0;1<t.thumb.length&&(a=1),n=F(e,t.thumb[a])}if("string"==typeof t.thumb&&(n=F(e,t.thumb)),this.detector.MediaExtension()&&"string"==typeof t.dash)return q("DASH",e,t.dash,F(e,t.dash)),this.playdash(F(e,t.dash),n),!0;var i=null==t.hls4?t.hls3:t.hls4;if(this.detector.HLSNative()&&"string"==typeof i)return q("HLS",e,i,F(e,i)),this.playhls(F(e,i),n),!0;q("CANNOT FIND A VALID PLUGIN PLAYER");return!1}},{key:"pause",value:function(){this.player.pause()}},{key:"time",value:function(){return this.player.time()}},{key:"events",get:function(){return L}},{key:"duration",get:function(){return this.player.duration}}]),t}(j.EventEmitter)),W={name:"Play",props:["mediaid","idx"],data:function(){return{status:null,name:null,id:null,owner:null,hls3:null,dash:null,thumb:[],hls4:null,playready:null,widevine:null,errors:[],play:function(){alert(this.dash)}}},created:function(){var e=this;p.a.get("/api/status/"+this.$route.params.id).then(function(t){e.status=t.data.status,e.owner=t.data.owner,e.dash=t.data.dash,e.hls3=t.data.hls3,e.thumb=t.data.thumb,e.id=t.data.id,e.name=t.data.name,Y.play(window.location.protocol+"//"+window.location.host+"/play/"+e.owner+"/"+e.id+"/",t.data)}).catch(function(t){e.errors.push(t)})}},B=(n(64),Object(s.a)(W,_,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"playbody"},[t("div",{attrs:{id:"playerhost"}})])}],!1,null,"46127d64",null));B.options.__file="src/components/Play.vue";var G=B.exports;a.a.use(u.a);var J=new u.a({routes:[{path:"/",name:"Assets",component:b,props:{filter:"ok"}},{path:"/play/:id",name:"Play",component:G},{path:"/working",name:"Working",component:b,props:{filter:"working"}}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:J,components:{App:l},render:function(e){return e("app")}})}});
//# sourceMappingURL=build.js.map