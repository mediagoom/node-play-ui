[{"id":"002558243058-0001/002558243058-0020","name":"ENCODE GEN-1","config":{"cmd":"ffmpeg","args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=256:h=144","-codec:v","libx264","-profile:v","high","-level","31","-b:v","120k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","120k","-maxrate","120k","-bufsize","120k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4"],"code":"\n            \n            if(config.args == null){\n                 throw new Error('null args');\n            }\n\n            if(config.args.length === 0){\n                throw new Error('0 args');\n            }\n\n            if(/$(video_bitrate)/.test(propertyBag.parent.result))\n            {\n                throw new Error('no video bitrate set');\n            }\n                 \n            JSON.stringify(config.args) \n            "},"type":"execute","asOf":null,"lease_time":null,"result":"","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:56:15.445Z","message":"","success":true}],"created":null,"modified":"2018-12-06T15:56:15.445Z","propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=256:h=144\" -codec:v libx264 -profile:v high -level 31 -b:v 120k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 120k -maxrate 120k -bufsize 120k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=256:h=144","-codec:v","libx264","-profile:v","high","-level","31","-b:v","120k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","120k","-maxrate","120k","-bufsize","120k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffmpeg version N-81872-gbe1d324 Copyright (c) 2000-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n","  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\n","Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n","    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n","    Stream #0:1(ita","): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)","\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n","[libx264 @ 0000000003c0dae0] using SAR=1/1\r\n","[libx264 @ 0000000003c0dae0] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX FMA3 AVX2 LZCNT BMI2\r\n","[libx264 @ 0000000003c0dae0] profile High, level 3.1\r\n","[libx264 @ 0000000003c0dae0] 264 - core 148 r2721 72d53ab - H.264/MPEG-4 AVC codec - Copyleft 2003-2016 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=4 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=50 keyint_min=5 scenecut=0 intra_refresh=0 rc_lookahead=40 rc=cbr mbtree=1 bitrate=120 ratetol=0.1 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 vbv_maxrate=120 vbv_bufsize=120 nal_hrd=none filler=0 ip_ratio=1.40 aq=1:1.00\r\n","Output #0, mp4, to 'C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4':\r\n  Metadata:\r\n    major_brand     : isom","\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    encoder         : Lavf57.51.102\r\n","    Stream #0:0(ita): Audio: aac (LC) ([64][0][0][0] / 0x0040), 44100 Hz, stereo, fltp, 128 kb/s (default)\r\n","    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n      encoder         : Lavc57.60.101 aac\r\n","    Stream #0:1(eng): Video: h264 (libx264) ([33][0][0][0] / 0x0021), yuv420p, 256x144 [SAR 1:1 DAR 16:9], q=-1--1, 120 kb/s, ","25 fps, 12800 tbn, 25 tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n","      handler_name    : FOUNDATION MEDIA HANDLER\r\n      encoder         : Lavc57.60.101 libx264\r\n    Side data:\r\n      cpb: ","bitrate max/min/avg: 120000/0/120000 buffer size: 120000 vbv_delay: -1\r\n","Stream mapping:\r\n","  Stream #0:1 -> #0:","0"," (aac (native) -> aac (native)",")","\r\n","  Stream #0:0 -> #0:","1"," (h264 (native) -> h264 (libx264))","\r\n","Press [q] to stop, [?] for help\r\n","frame=   47 fps=0.0 q=0.0 size=       0kB time=00:00:02.36 bitrate=   0.2kbits/s speed=4.72x    \r","frame=  120 fps=114 q=21.0 size=      87kB time=00:00:05.11 bitrate= 138.5kbits/s speed=4.85x    \r","frame=  215 fps=138 q=12.0 size=     188kB time=00:00:08.88 bitrate= 173.7kbits/s speed=5.71x    \r","frame=  377 fps=183 q=32.0 size=     374kB time=00:00:15.45 bitrate= 198.4kbits/s speed=7.51x    \r","frame=  526 fps=206 q=33.0 size=     554kB time=00:00:21.34 bitrate= 212.7kbits/s speed=8.34x    \r","frame=  676 fps=221 q=37.0 size=     735kB time=00:00:27.36 bitrate= 219.9kbits/s speed=8.95x    \r","frame=  814 fps=228 q=35.0 size=     895kB time=00:00:32.84 bitrate= 223.1kbits/s speed=9.22x    \r","frame=  968 fps=238 q=31.0 size=    1074kB time=00:00:39.02 bitrate= 225.4kbits/s speed= 9.6x    \r","frame= 1122 fps=246 q=36.0 size=    1256kB time=00:00:45.19 bitrate= 227.7kbits/s speed=9.89x    \r","frame= 1273 fps=251 q=23.0 size=    1429kB time=00:00:51.21 bitrate= 228.6kbits/s speed=10.1x    \r","frame= 1411 fps=253 q=21.0 size=    1583kB time=00:00:56.75 bitrate= 228.5kbits/s speed=10.2x    \r","frame= 1566 fps=258 q=26.0 size=    1764kB time=00:01:02.95 bitrate= 229.6kbits/s speed=10.4x    \r","frame= 1697 fps=258 q=29.0 size=    1918kB time=00:01:08.18 bitrate= 230.4kbits/s speed=10.4x    \r","frame= 1838 fps=260 q=32.0 size=    2087kB time=00:01:13.83 bitrate= 231.6kbits/s speed=10.4x    \r","frame= 1989 fps=263 q=24.0 size=    2260kB time=00:01:19.86 bitrate= 231.8kbits/s speed=10.5x    \r","frame= 2111 fps=262 q=24.0 size=    2406kB time=00:01:24.75 bitrate= 232.6kbits/s speed=10.5x    \r","frame= 2250 fps=262 q=23.0 size=    2570kB time=00:01:30.30 bitrate= 233.1kbits/s speed=10.5x    \r","frame= 2381 fps=262 q=30.0 size=    2720kB time=00:01:35.52 bitrate= 233.3kbits/s speed=10.5x    \r","frame= 2523 fps=264 q=29.0 size=    2889kB time=00:01:41.20 bitrate= 233.8kbits/s speed=10.6x    \r","frame= 2668 fps=265 q=30.0 size=    3056kB time=00:01:47.04 bitrate= 233.9kbits/s speed=10.6x    \r","frame= 2808 fps=266 q=28.0 size=    3219kB time=00:01:52.64 bitrate= 234.1kbits/s speed=10.7x    \r","frame= 2963 fps=267 q=29.0 size=    3398kB time=00:01:58.83 bitrate= 234.2kbits/s speed=10.7x    \r","frame= 3116 fps=269 q=32.0 size=    3580kB time=00:02:04.93 bitrate= 234.7kbits/s speed=10.8x    \r","frame= 3267 fps=270 q=25.0 size=    3759kB time=00:02:11.00 bitrate= 235.1kbits/s speed=10.8x    \r","frame= 3429 fps=273 q=25.0 size=    3943kB time=00:02:17.52 bitrate= 234.9kbits/s speed=10.9x    \r","frame= 3583 fps=274 q=25.0 size=    4126kB time=00:02:23.59 bitrate= 235.4kbits/s speed=  11x    \r","frame= 3708 fps=273 q=26.0 size=    4272kB time=00:02:28.64 bitrate= 235.4kbits/s speed=10.9x    \r","frame= 3833 fps=272 q=24.0 size=    4418kB time=00:02:33.62 bitrate= 235.6kbits/s speed=10.9x    \r","frame= 3975 fps=273 q=29.0 size=    4587kB time=00:02:39.30 bitrate= 235.9kbits/s speed=10.9x    \r","frame= 4113 fps=273 q=28.0 size=    4752kB time=00:02:44.86 bitrate= 236.1kbits/s speed=10.9x    \r","frame= 4242 fps=272 q=27.0 size=    4898kB time=00:02:49.95 bitrate= 236.1kbits/s speed=10.9x    \r","frame= 4364 fps=271 q=26.0 size=    5043kB time=00:02:54.88 bitrate= 236.2kbits/s speed=10.9x    \r","frame= 4484 fps=270 q=30.0 size=    5186kB time=00:02:59.69 bitrate= 236.4kbits/s speed=10.8x    \r","frame= 4608 fps=270 q=31.0 size=    5338kB time=00:03:04.64 bitrate= 236.8kbits/s speed=10.8x    \r","frame= 4738 fps=269 q=30.0 size=    5493kB time=00:03:09.84 bitrate= 237.0kbits/s speed=10.8x    \r","frame= 4870 fps=269 q=31.0 size=    5650kB time=00:03:15.10 bitrate= 237.2kbits/s speed=10.8x    \r","frame= 4997 fps=268 q=29.0 size=    5798kB time=00:03:20.22 bitrate= 237.2kbits/s speed=10.8x    \r","frame= 5137 fps=269 q=25.0 size=    5965kB time=00:03:25.81 bitrate= 237.4kbits/s speed=10.8x    \r","frame= 5259 fps=268 q=28.0 size=    6114kB time=00:03:30.67 bitrate= 237.7kbits/s speed=10.7x    \r","frame= 5393 fps=268 q=24.0 size=    6264kB time=00:03:36.03 bitrate= 237.5kbits/s speed=10.7x    \r","frame= 5515 fps=267 q=26.0 size=    6413kB time=00:03:41.03 bitrate= 237.7kbits/s speed=10.7x    \r","frame= 5665 fps=268 q=26.0 size=    6589kB time=00:03:46.87 bitrate= 237.9kbits/s speed=10.7x    \r","frame= 5783 fps=267 q=29.0 size=    6733kB time=00:03:51.67 bitrate= 238.1kbits/s speed=10.7x    \r","frame= 5922 fps=268 q=27.0 size=    6901kB time=00:03:57.19 bitrate= 238.3kbits/s speed=10.7x    \r","frame= 6055 fps=268 q=29.0 size=    7060kB time=00:04:02.49 bitrate= 238.5kbits/s speed=10.7x    \r","frame= 6182 fps=267 q=29.0 size=    7208kB time=00:04:07.60 bitrate= 238.5kbits/s speed=10.7x    \r","frame= 6302 fps=267 q=28.0 size=    7351kB time=00:04:12.45 bitrate= 238.6kbits/s speed=10.7x    \r","frame= 6409 fps=266 q=18.0 size=    7478kB time=00:04:16.63 bitrate= 238.7kbits/s speed=10.6x    \r","frame= 6540 fps=265 q=28.0 size=    7636kB time=00:04:21.90 bitrate= 238.8kbits/s speed=10.6x    \r","frame= 6683 fps=266 q=25.0 size=    7804kB time=00:04:27.66 bitrate= 238.8kbits/s speed=10.6x    \r","frame= 6811 fps=266 q=27.0 size=    7961kB time=00:04:32.75 bitrate= 239.1kbits/s speed=10.6x    \r","frame= 6947 fps=266 q=33.0 size=    8116kB time=00:04:38.25 bitrate= 239.0kbits/s speed=10.6x    \r","frame= 7068 fps=265 q=34.0 size=    8261kB time=00:04:43.08 bitrate= 239.1kbits/s speed=10.6x    \r","frame= 7176 fps=264 q=27.0 size=    8386kB time=00:04:47.34 bitrate= 239.1kbits/s speed=10.6x    \r","frame= 7300 fps=264 q=33.0 size=    8534kB time=00:04:52.29 bitrate= 239.2kbits/s speed=10.6x    \r","frame= 7422 fps=264 q=32.0 size=    8676kB time=00:04:57.20 bitrate= 239.1kbits/s speed=10.6x    \r","frame= 7500 fps=263 q=-1.0 Lsize=    9093kB time=00:04:59.98 bitrate= 248.3kbits/s speed=10.5x    \r\nvideo:4034kB audio:4792kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 3.027489%\r\n","[aac @ 0000000003c0cd00] Qavg: 556.544\r\n","[libx264 @ 0000000003c0dae0] frame I:150   Avg QP:22.68  size:  4593\r\n[libx264 @ 0000000003c0dae0] ","frame P:2429  Avg QP:26.33  size:   999\r\n[libx264 @ 0000000003c0dae0] frame B:4921  Avg QP:30.96  size:   206\r\n[libx264 @ 0000000003c0dae0] consecutive B-frames:  8.6%  8.8%  8.4% 74.1%\r\n[libx264 @ 0000000003c0dae0] mb I  I16..4:  9.3% 44.7% 46.0%\r\n[libx264 @ 0000000003c0dae0] mb P  I16..4:  2.3%  5.3%  3.2%  P16..4: 34.1% 22.3% 11.1%  0.0%  0.0%    skip:21.7%\r\n[libx264 @ 0000000003c0dae0] mb B  I16..4:  0.2%  0.2%  0.1%  B16..8: 35.9%  7.7%  1.4%  direct: 1.5%  skip:53.1%  L0:38.1% L1:53.4% BI: 8.5%\r\n","[libx264 @ 0000000003c0dae0] 8x8 transform intra:46.9% inter:65.4%\r\n[libx264 @ 0000000003c0dae0] coded y,uvDC,uvAC intra: 70.8% 77.4% 51.4% inter: 12.5% 12.2% 1.1%\r\n","[libx264 @ 0000000003c0dae0] i16 v,h,dc,p: 67% 21%  2% 10%\r\n[libx264 @ 0000000003c0dae0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 24% 20% 13%  6%  6%  8%  7%  8%  9%\r\n[libx264 @ 0000000003c0dae0] ","i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 34% 22% 12%  5%  6%  6%  6%  5%  5%\r\n[libx264 @ 0000000003c0dae0] i8c dc,h,v,p: 45% 20% 29%  7%\r\n[libx264 @ 0000000003c0dae0] ","Weighted P-Frames: Y:5.5% UV:2.7%\r\n[libx264 @ 0000000003c0dae0] ref P L0: 66.7% 17.9% 10.8%  4.5%  0.2%\r\n[libx264 @ 0000000003c0dae0]"," ref B L0: 92.8%  5.6%  1.6%\r\n[libx264 @ 0000000003c0dae0] ","ref B L1: 97.6%  2.4%\r\n[libx264 @ 0000000003c0dae0] kb/s:110.15\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4","video_bitrate":120}},"stop_on_error":true,"target_type":"execute","children_id":["002558243058-0001/002558243058-0021"],"external_type":"../operation/user/execute","processor_name":"HER17842","processor_work_id":7},{"id":"002558243058-0001/002558243058-0033","name":"ENCODE GEN-6","config":{"cmd":"ffmpeg","args":[],"code":"\n            \n            if(config.args == null){\n                 throw new Error('null args');\n            }\n\n            if(config.args.length === 0){\n                throw new Error('0 args');\n            }\n\n            if(/$(video_bitrate)/.test(propertyBag.parent.result))\n            {\n                throw new Error('no video bitrate set');\n            }\n                 \n            JSON.stringify(config.args) \n            "},"type":"execute","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"target_type":"execute","children_id":["002558243058-0001/002558243058-0021"]},{"id":"002558243058-0001/002558243058-0012","name":"CONFIGURE GEN-6","config":{"code":"\n\n        const parse = require('parse-spawn-args').parse;\n\n        const streams = JSON.parse(propertyBag.parent.result);\n\n        cmd_video = '-vf \"scale=w=$(width):h=$(height)\" -codec:v libx264 -profile:v high -level 31 -b:v $(video_bitrate)k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate $(video_bitrate)k -maxrate $(video_bitrate)k -bufsize $(video_bitrate)k'\n        cmd_audio = '-b:a $(ab)k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y'\n\n        cmd_encode = '-i \"$(file)\" $(map)$(video)$(audio) \"$(output_file)\"'\n        const file = propertyBag.input_file;\n       \n        cmd_encode = cmd_encode.replace('$(file)', file);\n\n        let audio = null;\n        let video = null;\n\n        for(let idx = 0; idx < streams.length; idx++)\n        {\n            const stream = streams[idx];\n\n            if('Video' === stream.kind && null === video)\n                video = stream;\n            \n            if('Audio' === stream.kind && null === audio)\n                audio = stream;\n        }\n\n        let map = ''\n\n        if(null !== audio)\n        {\n            map += '-map 0:' + audio.index;\n            map += ' '\n\n        }\n        else\n        {\n            cmd_audio = '';\n        }\n\n        if(null !== video)\n        {\n            map += '-map 0:' + video.index;\n            map += ' '\n        }\n        else\n        {\n            cmd_video = '';\n        }\n\n        if(null !== video && null !== audio)\n        {\n            cmd_encode = cmd_encode.replace('$(video)$(audio)', '$(video) $(audio)');\n        }\n\n        cmd_encode = cmd_encode.replace('$(map)', map);\n        cmd_encode = cmd_encode.replace('$(video)', cmd_video);\n        cmd_encode = cmd_encode.replace('$(audio)', cmd_audio);\n\n        cmd_encode = cmd_encode.replace('$(width)', config.width);\n        cmd_encode = cmd_encode.replace('$(height)', config.height);\n\n        cmd_encode = cmd_encode.replace(/\\$\\(video_bitrate\\)/g, config.video_bitrate);\n        \n        \n\n        cmd_encode = cmd_encode.replace(/\\$\\(ab\\)/g, config.audio_bitrate);\n\n        dbg(propertyBag.output_dir);\n\n        const output_file = propertyBag.output_dir + '/encoded_' + config.video_bitrate + '.mp4';\n\n        dbg(output_file);\n        cmd_encode = cmd_encode.replace('$(output_file)', output_file);\n       \n        propertyBag.quality = { file : output_file, video_bitrate: config.video_bitrate} ;\n\n        let j = parse(cmd_encode); \n\n        //propertyBag.cmd = cmd_encode;\n\n        dbg(cmd_encode);\n\n        propertyBag.config.args = j;\n\n        cmd_encode\n\n","height":720,"width":1280,"video_bitrate":3500,"audio_bitrate":128},"type":"code","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0033"]},{"id":"002558243058-0001/002558243058-0031","name":"ENCODE GEN-5","config":{"cmd":"ffmpeg","args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=1280:h=720","-codec:v","libx264","-profile:v","high","-level","31","-b:v","2000k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","2000k","-maxrate","2000k","-bufsize","2000k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_2000.mp4"],"code":"\n            \n            if(config.args == null){\n                 throw new Error('null args');\n            }\n\n            if(config.args.length === 0){\n                throw new Error('0 args');\n            }\n\n            if(/$(video_bitrate)/.test(propertyBag.parent.result))\n            {\n                throw new Error('no video bitrate set');\n            }\n                 \n            JSON.stringify(config.args) \n            "},"type":"execute","asOf":null,"lease_time":"2018-12-06T16:56:15.452Z","result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1280:h=720\" -codec:v libx264 -profile:v high -level 31 -b:v 2000k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 2000k -maxrate 2000k -bufsize 2000k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_2000.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=1280:h=720","-codec:v","libx264","-profile:v","high","-level","31","-b:v","2000k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","2000k","-maxrate","2000k","-bufsize","2000k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_2000.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_2000.mp4","video_bitrate":2000}},"stop_on_error":true,"target_type":"execute","children_id":["002558243058-0001/002558243058-0021"],"external_type":"../operation/user/execute"},{"id":"002558243058-0001/002558243058-0029","name":"ENCODE GEN-4","config":{"cmd":"ffmpeg","args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=1280:h=720","-codec:v","libx264","-profile:v","high","-level","31","-b:v","1200k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","1200k","-maxrate","1200k","-bufsize","1200k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_1200.mp4"],"code":"\n            \n            if(config.args == null){\n                 throw new Error('null args');\n            }\n\n            if(config.args.length === 0){\n                throw new Error('0 args');\n            }\n\n            if(/$(video_bitrate)/.test(propertyBag.parent.result))\n            {\n                throw new Error('no video bitrate set');\n            }\n                 \n            JSON.stringify(config.args) \n            "},"type":"execute","asOf":null,"lease_time":"2018-12-06T16:56:15.452Z","result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1280:h=720\" -codec:v libx264 -profile:v high -level 31 -b:v 1200k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 1200k -maxrate 1200k -bufsize 1200k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_1200.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=1280:h=720","-codec:v","libx264","-profile:v","high","-level","31","-b:v","1200k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","1200k","-maxrate","1200k","-bufsize","1200k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_1200.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_1200.mp4","video_bitrate":1200}},"stop_on_error":true,"target_type":"execute","children_id":["002558243058-0001/002558243058-0021"],"external_type":"../operation/user/execute","processor_name":"HER17842","processor_work_id":13},{"id":"002558243058-0001/002558243058-0027","name":"ENCODE GEN-3","config":{"cmd":"ffmpeg","args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=1024:h=576","-codec:v","libx264","-profile:v","high","-level","31","-b:v","750k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","750k","-maxrate","750k","-bufsize","750k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_750.mp4"],"code":"\n            \n            if(config.args == null){\n                 throw new Error('null args');\n            }\n\n            if(config.args.length === 0){\n                throw new Error('0 args');\n            }\n\n            if(/$(video_bitrate)/.test(propertyBag.parent.result))\n            {\n                throw new Error('no video bitrate set');\n            }\n                 \n            JSON.stringify(config.args) \n            "},"type":"execute","asOf":null,"lease_time":"2018-12-06T16:56:15.452Z","result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1024:h=576\" -codec:v libx264 -profile:v high -level 31 -b:v 750k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 750k -maxrate 750k -bufsize 750k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_750.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=1024:h=576","-codec:v","libx264","-profile:v","high","-level","31","-b:v","750k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","750k","-maxrate","750k","-bufsize","750k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_750.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_750.mp4","video_bitrate":750}},"stop_on_error":true,"target_type":"execute","children_id":["002558243058-0001/002558243058-0021"],"external_type":"../operation/user/execute","processor_name":"HER17842","processor_work_id":12},{"id":"002558243058-0001/002558243058-0014","name":"AFTER-IMAGES","config":null,"type":"JOIN","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0015"]},{"id":"002558243058-0001/002558243058-0015","name":"config read status","config":{"code":"\n            propertyBag.status_path = propertyBag.output_dir + '/status.json';\n            propertyBag.config.path = propertyBag.status_path;\n            dbg('READ FILE', propertyBag.config.path);\n            propertyBag.config.path;\n    "},"type":"code","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0016"]},{"id":"002558243058-0001/002558243058-0016","name":"read status","config":{"path":"set by config","code":"\n        `{\n            \"previous\":[\"reserved\",\"analyzed\",\"encoded\"],\n            \"status\":\"ok\",\"name\":\"pippo20_mp4\",\"id\":\"002560838342_pippo20_mp4\"\n            ,\"datetime\":\"2018-11-06T15:01:07.767Z\",\"creationtime\":\"2018-11-06T15:00:58.253Z\"\n            ,\"owner\":\"uploader\"\n            \n        }\n        `\n        "},"type":"read-file","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"target_type":"read-file","children_id":["002558243058-0001/002558243058-0017"]},{"id":"002558243058-0001/002558243058-0017","name":"config write status","config":{"code":"\n                const result = propertyBag.parent.result;\n                \n                dbg('STATUS CONTENT', result);\n                \n                let status = JSON.parse(propertyBag.parent.result);\n                let closing_info = {\n                    \"status\":\"ok\"\n                    , \"hls3\":\"STATIC/main.m3u8\"\n                    ,\"dash\":\"STATIC/index.mpd\"\n                    ,\"thumb\":[\"img001.jpg\",\"img002.jpg\", \"img003.jpg\", \"img004.jpg\"]\n                    ,\"hls4\":null,\"playready\":null\n                    ,\"widevine\":null\n                };\n\n                status =  Object.assign({}, status, closing_info);\n\n                const content = JSON.stringify(status);\n\n                dbg('FINAL', status);\n\n                propertyBag.config.content = content;\n                propertyBag.config.path = propertyBag.status_path;\n\n            "},"type":"code","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0018"]},{"id":"002558243058-0001/002558243058-0018","name":null,"config":{"path":"-","content":"","code":"\"file-write\""},"type":"write-file","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"target_type":"write-file","children_id":["002558243058-0001/002558243058-0019"]},{"id":"002558243058-0001/002558243058-0019","name":"FINISH","config":null,"type":"END","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"children_id":[]},{"id":"002558243058-0001/002558243058-0023","name":"MG PACKAGE","config":{"cmd":"mg","args":[],"code":"\"MG\""},"type":"execute","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"target_type":"execute","children_id":["002558243058-0001/002558243058-0014"]},{"id":"002558243058-0001/002558243058-0022","name":"CONFIGURE PACKAGE","config":{"code":"\n\n    const quality = propertyBag.quality;\n    let args = [];\n    args.push('-k:adaptive');\n    args.push('-o:' + propertyBag.output_dir + '/STATIC');\n    let first   = true;\n    let cmd_line = '';\n\n    for(let i = 0; i < quality.length; i++){\n        if(null != quality[i].file){\n\n            if(first){\n                cmd_line += '-i:';\n            }\n            else{\n                cmd_line += '-j:';\n            }\n\n            cmd_line += quality[i].file;\n            \n            args.push(cmd_line);\n            cmd_line = '';\n\n            args.push('-b:' + quality[i].video_bitrate);\n            \n            if(first){\n                args.push('-s:0');\n                args.push('-e:0');\n            }\n        \n            first = false;\n        }\n    }\n\n    propertyBag.config.args = args;\n\n    JSON.stringify(args);\n\n"},"type":"code","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"target_type":"code","children_id":["002558243058-0001/002558243058-0023"]},{"id":"002558243058-0001/002558243058-0021","name":"AFTER ENCODING","config":null,"type":"JOIN","asOf":null,"lease_time":null,"result":null,"completed":false,"succeeded":false,"executed":false,"history":null,"created":null,"modified":null,"propertyBag":null,"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0022"]},{"id":"002558243058-0001/002558243058-0010","name":"CONFIGURE GEN-4","config":{"code":"\n\n        const parse = require('parse-spawn-args').parse;\n\n        const streams = JSON.parse(propertyBag.parent.result);\n\n        cmd_video = '-vf \"scale=w=$(width):h=$(height)\" -codec:v libx264 -profile:v high -level 31 -b:v $(video_bitrate)k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate $(video_bitrate)k -maxrate $(video_bitrate)k -bufsize $(video_bitrate)k'\n        cmd_audio = '-b:a $(ab)k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y'\n\n        cmd_encode = '-i \"$(file)\" $(map)$(video)$(audio) \"$(output_file)\"'\n        const file = propertyBag.input_file;\n       \n        cmd_encode = cmd_encode.replace('$(file)', file);\n\n        let audio = null;\n        let video = null;\n\n        for(let idx = 0; idx < streams.length; idx++)\n        {\n            const stream = streams[idx];\n\n            if('Video' === stream.kind && null === video)\n                video = stream;\n            \n            if('Audio' === stream.kind && null === audio)\n                audio = stream;\n        }\n\n        let map = ''\n\n        if(null !== audio)\n        {\n            map += '-map 0:' + audio.index;\n            map += ' '\n\n        }\n        else\n        {\n            cmd_audio = '';\n        }\n\n        if(null !== video)\n        {\n            map += '-map 0:' + video.index;\n            map += ' '\n        }\n        else\n        {\n            cmd_video = '';\n        }\n\n        if(null !== video && null !== audio)\n        {\n            cmd_encode = cmd_encode.replace('$(video)$(audio)', '$(video) $(audio)');\n        }\n\n        cmd_encode = cmd_encode.replace('$(map)', map);\n        cmd_encode = cmd_encode.replace('$(video)', cmd_video);\n        cmd_encode = cmd_encode.replace('$(audio)', cmd_audio);\n\n        cmd_encode = cmd_encode.replace('$(width)', config.width);\n        cmd_encode = cmd_encode.replace('$(height)', config.height);\n\n        cmd_encode = cmd_encode.replace(/\\$\\(video_bitrate\\)/g, config.video_bitrate);\n        \n        \n\n        cmd_encode = cmd_encode.replace(/\\$\\(ab\\)/g, config.audio_bitrate);\n\n        dbg(propertyBag.output_dir);\n\n        const output_file = propertyBag.output_dir + '/encoded_' + config.video_bitrate + '.mp4';\n\n        dbg(output_file);\n        cmd_encode = cmd_encode.replace('$(output_file)', output_file);\n       \n        propertyBag.quality = { file : output_file, video_bitrate: config.video_bitrate} ;\n\n        let j = parse(cmd_encode); \n\n        //propertyBag.cmd = cmd_encode;\n\n        dbg(cmd_encode);\n\n        propertyBag.config.args = j;\n\n        cmd_encode\n\n","height":720,"width":1280,"video_bitrate":1200,"audio_bitrate":128},"type":"code","asOf":null,"lease_time":null,"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1280:h=720\" -codec:v libx264 -profile:v high -level 31 -b:v 1200k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 1200k -maxrate 1200k -bufsize 1200k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_1200.mp4\"","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:56:15.450Z","message":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1280:h=720\" -codec:v libx264 -profile:v high -level 31 -b:v 1200k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 1200k -maxrate 1200k -bufsize 1200k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_1200.mp4\"","success":true}],"created":null,"modified":"2018-12-06T15:56:15.450Z","propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1280:h=720\" -codec:v libx264 -profile:v high -level 31 -b:v 1200k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 1200k -maxrate 1200k -bufsize 1200k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_1200.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=1280:h=720","-codec:v","libx264","-profile:v","high","-level","31","-b:v","1200k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","1200k","-maxrate","1200k","-bufsize","1200k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_1200.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_1200.mp4","video_bitrate":1200}},"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0029"],"external_type":"../operation/user/code","processor_name":"HER17842","processor_work_id":10},{"id":"002558243058-0001/002558243058-0002","name":"START","config":null,"type":"START","asOf":null,"lease_time":null,"result":"START","completed":true,"succeeded":true,"executed":false,"history":[{"date":"2018-12-06T15:55:41.993Z","message":"START","success":true}],"created":null,"modified":"2018-12-06T15:55:41.993Z","propertyBag":{"parent":{"result":"START","succeeded":true},"original":{},"config":{}},"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0003"]},{"id":"002558243058-0001/002558243058-0003","name":"pre configuration","config":{"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","code":"\n    const file = propertyBag.input_file = config.input_file;\n    propertyBag.output_dir = config.output_dir;\n    //let configure next operation file probe\n    propertyBag.config.args = [ file ];\n\n    \n    file\n"},"type":"code","asOf":null,"lease_time":null,"result":"C:/Users/a.surra/.node_play/uploader/T7.MP4","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:55:42.001Z","message":"C:/Users/a.surra/.node_play/uploader/T7.MP4","success":true}],"created":null,"modified":"2018-12-06T15:55:42.001Z","propertyBag":{"parent":{"result":"C:/Users/a.surra/.node_play/uploader/T7.MP4","succeeded":true},"original":{"args":["this is configured by the previous operation"]},"config":{"args":["C:/Users/a.surra/.node_play/uploader/T7.MP4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4"},"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0004"],"external_type":"../operation/user/code","processor_name":"HER17842","processor_work_id":0},{"id":"002558243058-0001/002558243058-0004","name":"run ffprobe","config":{"cmd":"ffprobe","args":["C:/Users/a.surra/.node_play/uploader/T7.MP4"],"include_err":true,"code":" `\nffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\n  built with gcc 5.4.0 (GCC)\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-lib\nebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfree\ntype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-lib\nopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheor\na --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --ena\nble-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\n  libavutil      55. 32.100 / 55. 32.100\n  libavcodec     57. 60.101 / 57. 60.101\n  libavformat    57. 51.102 / 57. 51.102\n  libavdevice    57.  0.102 / 57.  0.102\n  libavfilter     6. 63.100 /  6. 63.100\n  libswscale      4.  1.100 /  4.  1.100\n  libswresample   2.  2.100 /  2.  2.100\n  libpostproc    54.  0.100 / 54.  0.100\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'A:\\data\\testfiles\\MULTILANGUAGE.MP4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    creation_time   : 2016-02-24T12:46:47.000000Z\n  Duration: 00:59:59.93, start: 0.199000, bitrate: 759 kb/s\n    Stream #0:0(ita): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 619 kb/s, 23.99 fps, 60 tbr, 1k tbn, 20000k tbc (default)\n    Metadata:\n      creation_time   : 2016-02-24T12:46:47.000000Z\n      handler_name    : FOUNDATION MEDIA HANDLER\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 63 kb/s (default)\n    Metadata:\n      creation_time   : 2016-02-24T12:46:47.000000Z\n      handler_name    : FOUNDATION MEDIA HANDLER\n    Stream #0:2(eng): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 63 kb/s (default)\n    Metadata:\n      creation_time   : 2016-02-24T12:46:47.000000Z\n      handler_name    : FOUNDATION MEDIA HANDLER\n` "},"type":"execute","asOf":null,"lease_time":null,"result":"ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:55:44.166Z","message":"ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n","success":true}],"created":null,"modified":"2018-12-06T15:55:44.166Z","propertyBag":{"parent":{"result":"ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n","succeeded":true},"original":{},"config":{"args":["C:/Users/a.surra/.node_play/uploader/T7.MP4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}}},"stop_on_error":true,"target_type":"execute","children_id":["002558243058-0001/002558243058-0005"],"external_type":"../operation/user/execute","processor_name":"HER17842","processor_work_id":1},{"id":"002558243058-0001/002558243058-0005","name":"process streams and config","config":{"code":"\n\n          let output = propertyBag.parent.result;\n\n          let regex_duration = new RegExp(config.duration_rx, 'g');\n          let m = null;\n          let kb = 0;\n          let duration = 0;\n\n            if ((m = regex_duration.exec(output)) !== null) {\n                \n                kb = m[6];\n\n                const hh = new Number(m[1]);\n                const mm = new Number(m[2]);\n                const ss = new Number(m[3]);\n                const ml = new Number(m[4]);\n\n                duration = hh * 60 * 60;\n                duration += mm * 60;\n                duration += ss;\n\n                duration += ml / 1000;\n\n\n            }\n\n           let regexp = new RegExp(config.stream_rx, 'g');\n\n           const streams = [];\n        \n        while ((m = regexp.exec(output)) !== null) {\n            let s = { index : m[1]\n                , lang  : m[2]\n                , kind  : m[3]\n                , width : m[4]\n                , height: m[5]\n                , kz    : m[6]\n                , bps   : m[7]\n            };\n\n            if(s.kind == 'Video' && s.bps == null)\n                s.bps = kb;\n\n            if(s.lang == null)\n                s.lang = 'und';\n\n            streams.push(s);\n\n        }\n    \n    //streams.splice(-1, 1);\n\n    propertyBag.kb = kb;\n    propertyBag.duration = duration;\n    propertyBag.streams = streams;\n\n    JSON.stringify(streams, null, 4);\n\n","duration_rx":"Duration: (\\d\\d):(\\d\\d):(\\d\\d).(\\d\\d), start: ([\\d\\.]+), bitrate: (\\d+) kb/s","stream_rx":"Stream\\s#0:(\\d+)(?:[\\(\\[](\\w+)[\\)\\]]){0,1}:\\s(Audio|Video):.*?(?:(?:,\\s(\\d+)x(\\d+))|(?:(\\d+) Hz)).*?, (?:(?:(\\d+) kb/s)|(?:stereo)|(?:.*? fps))"},"type":"code","asOf":null,"lease_time":null,"result":"[\n    {\n        \"index\": \"0\",\n        \"lang\": \"eng\",\n        \"kind\": \"Video\",\n        \"width\": \"1024\",\n        \"height\": \"576\",\n        \"bps\": \"894\"\n    },\n    {\n        \"index\": \"1\",\n        \"lang\": \"ita\",\n        \"kind\": \"Audio\",\n        \"kz\": \"44100\"\n    }\n]","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:55:44.168Z","message":"[\n    {\n        \"index\": \"0\",\n        \"lang\": \"eng\",\n        \"kind\": \"Video\",\n        \"width\": \"1024\",\n        \"height\": \"576\",\n        \"bps\": \"894\"\n    },\n    {\n        \"index\": \"1\",\n        \"lang\": \"ita\",\n        \"kind\": \"Audio\",\n        \"kz\": \"44100\"\n    }\n]","success":true}],"created":null,"modified":"2018-12-06T15:55:44.168Z","propertyBag":{"parent":{"result":"[\n    {\n        \"index\": \"0\",\n        \"lang\": \"eng\",\n        \"kind\": \"Video\",\n        \"width\": \"1024\",\n        \"height\": \"576\",\n        \"bps\": \"894\"\n    },\n    {\n        \"index\": \"1\",\n        \"lang\": \"ita\",\n        \"kind\": \"Audio\",\n        \"kz\": \"44100\"\n    }\n]","succeeded":true},"original":{},"config":{"args":["C:/Users/a.surra/.node_play/uploader/T7.MP4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}]},"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0006","002558243058-0001/002558243058-0007","002558243058-0001/002558243058-0008","002558243058-0001/002558243058-0009","002558243058-0001/002558243058-0010","002558243058-0001/002558243058-0011","002558243058-0001/002558243058-0012"],"external_type":"../operation/user/code","processor_name":"HER17842","processor_work_id":2},{"id":"002558243058-0001/002558243058-0007","name":"CONFIGURE GEN-1","config":{"code":"\n\n        const parse = require('parse-spawn-args').parse;\n\n        const streams = JSON.parse(propertyBag.parent.result);\n\n        cmd_video = '-vf \"scale=w=$(width):h=$(height)\" -codec:v libx264 -profile:v high -level 31 -b:v $(video_bitrate)k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate $(video_bitrate)k -maxrate $(video_bitrate)k -bufsize $(video_bitrate)k'\n        cmd_audio = '-b:a $(ab)k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y'\n\n        cmd_encode = '-i \"$(file)\" $(map)$(video)$(audio) \"$(output_file)\"'\n        const file = propertyBag.input_file;\n       \n        cmd_encode = cmd_encode.replace('$(file)', file);\n\n        let audio = null;\n        let video = null;\n\n        for(let idx = 0; idx < streams.length; idx++)\n        {\n            const stream = streams[idx];\n\n            if('Video' === stream.kind && null === video)\n                video = stream;\n            \n            if('Audio' === stream.kind && null === audio)\n                audio = stream;\n        }\n\n        let map = ''\n\n        if(null !== audio)\n        {\n            map += '-map 0:' + audio.index;\n            map += ' '\n\n        }\n        else\n        {\n            cmd_audio = '';\n        }\n\n        if(null !== video)\n        {\n            map += '-map 0:' + video.index;\n            map += ' '\n        }\n        else\n        {\n            cmd_video = '';\n        }\n\n        if(null !== video && null !== audio)\n        {\n            cmd_encode = cmd_encode.replace('$(video)$(audio)', '$(video) $(audio)');\n        }\n\n        cmd_encode = cmd_encode.replace('$(map)', map);\n        cmd_encode = cmd_encode.replace('$(video)', cmd_video);\n        cmd_encode = cmd_encode.replace('$(audio)', cmd_audio);\n\n        cmd_encode = cmd_encode.replace('$(width)', config.width);\n        cmd_encode = cmd_encode.replace('$(height)', config.height);\n\n        cmd_encode = cmd_encode.replace(/\\$\\(video_bitrate\\)/g, config.video_bitrate);\n        \n        \n\n        cmd_encode = cmd_encode.replace(/\\$\\(ab\\)/g, config.audio_bitrate);\n\n        dbg(propertyBag.output_dir);\n\n        const output_file = propertyBag.output_dir + '/encoded_' + config.video_bitrate + '.mp4';\n\n        dbg(output_file);\n        cmd_encode = cmd_encode.replace('$(output_file)', output_file);\n       \n        propertyBag.quality = { file : output_file, video_bitrate: config.video_bitrate} ;\n\n        let j = parse(cmd_encode); \n\n        //propertyBag.cmd = cmd_encode;\n\n        dbg(cmd_encode);\n\n        propertyBag.config.args = j;\n\n        cmd_encode\n\n","height":144,"width":256,"video_bitrate":120,"audio_bitrate":128},"type":"code","asOf":null,"lease_time":null,"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=256:h=144\" -codec:v libx264 -profile:v high -level 31 -b:v 120k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 120k -maxrate 120k -bufsize 120k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4\"","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:55:44.197Z","message":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=256:h=144\" -codec:v libx264 -profile:v high -level 31 -b:v 120k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 120k -maxrate 120k -bufsize 120k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4\"","success":true}],"created":null,"modified":"2018-12-06T15:55:44.197Z","propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=256:h=144\" -codec:v libx264 -profile:v high -level 31 -b:v 120k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 120k -maxrate 120k -bufsize 120k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=256:h=144","-codec:v","libx264","-profile:v","high","-level","31","-b:v","120k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","120k","-maxrate","120k","-bufsize","120k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_120.mp4","video_bitrate":120}},"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0020"],"external_type":"../operation/user/code","processor_name":"HER17842","processor_work_id":4},{"id":"002558243058-0001/002558243058-0006","name":"configure ffmpeg images","config":{"code":"\n\n    const parse = require('parse-spawn-args').parse;\n\n    let fps = '1/10';\n\n    if(propertyBag.duration < 100)\n        fps = '1/5';\n    \n    if(propertyBag.duration < 50)\n        fps = '1/2';\n    \n    if(propertyBag.duration < 20)\n        fps = '1';\n    \n    if(propertyBag.duration < 10)\n        fps = '2';\n    \n    if(propertyBag.duration < 5)\n        fps = '10';\n\n    let cmd_images = '-t 100 -i \"$(file)\" -vf fps=$(fps) \"$(dir)/img%03d.jpg\"'\n\n    const file = propertyBag.input_file;\n    \n    cmd_images = cmd_images.replace('$(fps)', fps);\n    cmd_images = cmd_images.replace('$(file)', file);\n    cmd_images = cmd_images.replace('$(dir)', propertyBag.output_dir);\n\n    let j = parse(cmd_images);//cmd_images.split(' ');\n    dbg(cmd_images);\n\n    propertyBag.config.args = j;\n\n    cmd_images\n"},"type":"code","asOf":null,"lease_time":null,"result":"-t 100 -i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -vf fps=1/10 \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/img%03d.jpg\"","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:55:44.196Z","message":"-t 100 -i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -vf fps=1/10 \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/img%03d.jpg\"","success":true}],"created":null,"modified":"2018-12-06T15:55:44.197Z","propertyBag":{"parent":{"result":"-t 100 -i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -vf fps=1/10 \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/img%03d.jpg\"","succeeded":true},"original":{"args":[]},"config":{"args":["-t","100","-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-vf","fps=1/10","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/img%03d.jpg"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}]},"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0013"],"external_type":"../operation/user/code","processor_name":"HER17842","processor_work_id":3},{"id":"002558243058-0001/002558243058-0008","name":"CONFIGURE GEN-2","config":{"code":"\n\n        const parse = require('parse-spawn-args').parse;\n\n        const streams = JSON.parse(propertyBag.parent.result);\n\n        cmd_video = '-vf \"scale=w=$(width):h=$(height)\" -codec:v libx264 -profile:v high -level 31 -b:v $(video_bitrate)k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate $(video_bitrate)k -maxrate $(video_bitrate)k -bufsize $(video_bitrate)k'\n        cmd_audio = '-b:a $(ab)k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y'\n\n        cmd_encode = '-i \"$(file)\" $(map)$(video)$(audio) \"$(output_file)\"'\n        const file = propertyBag.input_file;\n       \n        cmd_encode = cmd_encode.replace('$(file)', file);\n\n        let audio = null;\n        let video = null;\n\n        for(let idx = 0; idx < streams.length; idx++)\n        {\n            const stream = streams[idx];\n\n            if('Video' === stream.kind && null === video)\n                video = stream;\n            \n            if('Audio' === stream.kind && null === audio)\n                audio = stream;\n        }\n\n        let map = ''\n\n        if(null !== audio)\n        {\n            map += '-map 0:' + audio.index;\n            map += ' '\n\n        }\n        else\n        {\n            cmd_audio = '';\n        }\n\n        if(null !== video)\n        {\n            map += '-map 0:' + video.index;\n            map += ' '\n        }\n        else\n        {\n            cmd_video = '';\n        }\n\n        if(null !== video && null !== audio)\n        {\n            cmd_encode = cmd_encode.replace('$(video)$(audio)', '$(video) $(audio)');\n        }\n\n        cmd_encode = cmd_encode.replace('$(map)', map);\n        cmd_encode = cmd_encode.replace('$(video)', cmd_video);\n        cmd_encode = cmd_encode.replace('$(audio)', cmd_audio);\n\n        cmd_encode = cmd_encode.replace('$(width)', config.width);\n        cmd_encode = cmd_encode.replace('$(height)', config.height);\n\n        cmd_encode = cmd_encode.replace(/\\$\\(video_bitrate\\)/g, config.video_bitrate);\n        \n        \n\n        cmd_encode = cmd_encode.replace(/\\$\\(ab\\)/g, config.audio_bitrate);\n\n        dbg(propertyBag.output_dir);\n\n        const output_file = propertyBag.output_dir + '/encoded_' + config.video_bitrate + '.mp4';\n\n        dbg(output_file);\n        cmd_encode = cmd_encode.replace('$(output_file)', output_file);\n       \n        propertyBag.quality = { file : output_file, video_bitrate: config.video_bitrate} ;\n\n        let j = parse(cmd_encode); \n\n        //propertyBag.cmd = cmd_encode;\n\n        dbg(cmd_encode);\n\n        propertyBag.config.args = j;\n\n        cmd_encode\n\n","height":288,"width":512,"video_bitrate":320,"audio_bitrate":128},"type":"code","asOf":null,"lease_time":null,"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=512:h=288\" -codec:v libx264 -profile:v high -level 31 -b:v 320k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 320k -maxrate 320k -bufsize 320k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4\"","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:55:44.198Z","message":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=512:h=288\" -codec:v libx264 -profile:v high -level 31 -b:v 320k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 320k -maxrate 320k -bufsize 320k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4\"","success":true}],"created":null,"modified":"2018-12-06T15:55:44.198Z","propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=512:h=288\" -codec:v libx264 -profile:v high -level 31 -b:v 320k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 320k -maxrate 320k -bufsize 320k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=512:h=288","-codec:v","libx264","-profile:v","high","-level","31","-b:v","320k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","320k","-maxrate","320k","-bufsize","320k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4","video_bitrate":320}},"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0025"],"external_type":"../operation/user/code","processor_name":"HER17842","processor_work_id":5},{"id":"002558243058-0001/002558243058-0013","name":"run ffmpeg images","config":{"cmd":"ffmpeg","args":["-t","100","-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-vf","fps=1/10","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/img%03d.jpg"],"code":" \"this is the ffmpeg image return\" "},"type":"execute","asOf":null,"lease_time":null,"result":"","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:55:48.350Z","message":"","success":true}],"created":null,"modified":"2018-12-06T15:55:48.350Z","propertyBag":{"parent":{"result":"-t 100 -i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -vf fps=1/10 \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/img%03d.jpg\"","succeeded":true},"original":{"args":[]},"config":{"args":["-t","100","-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-vf","fps=1/10","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/img%03d.jpg"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffmpeg version N-81872-gbe1d324 Copyright (c) 2000-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n","  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\n","Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 51","2\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n","    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, ","25 fps, 25 tbr, 1k tbn, ","20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z","\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n","    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : ","FOUNDATION MEDIA HANDLER\r\n","[swscaler @ 0000000003b800a0] deprecated pixel format used, make sure you did set range correctly\r\n","Output #0, image2, to 'C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/img%03d.jpg':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512","\r\n    compatible_brands: isomiso2avc1mp41\r\n    encoder         : Lavf57.51.102\r\n    Stream #0:0(eng): Video: mjpeg, yuvj420p(pc), 1024x576 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 0.10 fps, 0.10 tbn, 0.10 tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n      encoder         : Lavc57.60.101 mjpeg\r\n    Side data:\r\n      cpb: bitrate max/min/avg: 0/0/200000 buffer size: 0 vbv_delay: -1\r\nStream mapping:\r\n  Stream #0:0 -> #0:0 (h264 (native) -> mjpeg (native))\r\nPress [q] to stop, [?] for help\r\n","frame=    4 fps=0.0 q=1.6 size=N/A time=00:00:40.00 bitrate=N/A speed=  80x    \r","frame=    7 fps=7.0 q=1.6 size=N/A time=00:01:10.00 bitrate=N/A speed=69.9x    \r","frame=   11 fps=7.5 q=1.6 Lsize=N/A time=00:01:50.00 bitrate=N/A speed=74.6x    \r\nvideo:522kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}]},"stop_on_error":true,"target_type":"execute","children_id":["002558243058-0001/002558243058-0014"],"external_type":"../operation/user/execute","processor_name":"HER17842","processor_work_id":6},{"id":"002558243058-0001/002558243058-0009","name":"CONFIGURE GEN-3","config":{"code":"\n\n        const parse = require('parse-spawn-args').parse;\n\n        const streams = JSON.parse(propertyBag.parent.result);\n\n        cmd_video = '-vf \"scale=w=$(width):h=$(height)\" -codec:v libx264 -profile:v high -level 31 -b:v $(video_bitrate)k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate $(video_bitrate)k -maxrate $(video_bitrate)k -bufsize $(video_bitrate)k'\n        cmd_audio = '-b:a $(ab)k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y'\n\n        cmd_encode = '-i \"$(file)\" $(map)$(video)$(audio) \"$(output_file)\"'\n        const file = propertyBag.input_file;\n       \n        cmd_encode = cmd_encode.replace('$(file)', file);\n\n        let audio = null;\n        let video = null;\n\n        for(let idx = 0; idx < streams.length; idx++)\n        {\n            const stream = streams[idx];\n\n            if('Video' === stream.kind && null === video)\n                video = stream;\n            \n            if('Audio' === stream.kind && null === audio)\n                audio = stream;\n        }\n\n        let map = ''\n\n        if(null !== audio)\n        {\n            map += '-map 0:' + audio.index;\n            map += ' '\n\n        }\n        else\n        {\n            cmd_audio = '';\n        }\n\n        if(null !== video)\n        {\n            map += '-map 0:' + video.index;\n            map += ' '\n        }\n        else\n        {\n            cmd_video = '';\n        }\n\n        if(null !== video && null !== audio)\n        {\n            cmd_encode = cmd_encode.replace('$(video)$(audio)', '$(video) $(audio)');\n        }\n\n        cmd_encode = cmd_encode.replace('$(map)', map);\n        cmd_encode = cmd_encode.replace('$(video)', cmd_video);\n        cmd_encode = cmd_encode.replace('$(audio)', cmd_audio);\n\n        cmd_encode = cmd_encode.replace('$(width)', config.width);\n        cmd_encode = cmd_encode.replace('$(height)', config.height);\n\n        cmd_encode = cmd_encode.replace(/\\$\\(video_bitrate\\)/g, config.video_bitrate);\n        \n        \n\n        cmd_encode = cmd_encode.replace(/\\$\\(ab\\)/g, config.audio_bitrate);\n\n        dbg(propertyBag.output_dir);\n\n        const output_file = propertyBag.output_dir + '/encoded_' + config.video_bitrate + '.mp4';\n\n        dbg(output_file);\n        cmd_encode = cmd_encode.replace('$(output_file)', output_file);\n       \n        propertyBag.quality = { file : output_file, video_bitrate: config.video_bitrate} ;\n\n        let j = parse(cmd_encode); \n\n        //propertyBag.cmd = cmd_encode;\n\n        dbg(cmd_encode);\n\n        propertyBag.config.args = j;\n\n        cmd_encode\n\n","height":576,"width":1024,"video_bitrate":750,"audio_bitrate":128},"type":"code","asOf":null,"lease_time":null,"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1024:h=576\" -codec:v libx264 -profile:v high -level 31 -b:v 750k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 750k -maxrate 750k -bufsize 750k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_750.mp4\"","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:56:15.448Z","message":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1024:h=576\" -codec:v libx264 -profile:v high -level 31 -b:v 750k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 750k -maxrate 750k -bufsize 750k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_750.mp4\"","success":true}],"created":null,"modified":"2018-12-06T15:56:15.448Z","propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1024:h=576\" -codec:v libx264 -profile:v high -level 31 -b:v 750k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 750k -maxrate 750k -bufsize 750k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_750.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=1024:h=576","-codec:v","libx264","-profile:v","high","-level","31","-b:v","750k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","750k","-maxrate","750k","-bufsize","750k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_750.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_750.mp4","video_bitrate":750}},"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0027"],"external_type":"../operation/user/code","processor_name":"HER17842","processor_work_id":9},{"id":"002558243058-0001/002558243058-0011","name":"CONFIGURE GEN-5","config":{"code":"\n\n        const parse = require('parse-spawn-args').parse;\n\n        const streams = JSON.parse(propertyBag.parent.result);\n\n        cmd_video = '-vf \"scale=w=$(width):h=$(height)\" -codec:v libx264 -profile:v high -level 31 -b:v $(video_bitrate)k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate $(video_bitrate)k -maxrate $(video_bitrate)k -bufsize $(video_bitrate)k'\n        cmd_audio = '-b:a $(ab)k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y'\n\n        cmd_encode = '-i \"$(file)\" $(map)$(video)$(audio) \"$(output_file)\"'\n        const file = propertyBag.input_file;\n       \n        cmd_encode = cmd_encode.replace('$(file)', file);\n\n        let audio = null;\n        let video = null;\n\n        for(let idx = 0; idx < streams.length; idx++)\n        {\n            const stream = streams[idx];\n\n            if('Video' === stream.kind && null === video)\n                video = stream;\n            \n            if('Audio' === stream.kind && null === audio)\n                audio = stream;\n        }\n\n        let map = ''\n\n        if(null !== audio)\n        {\n            map += '-map 0:' + audio.index;\n            map += ' '\n\n        }\n        else\n        {\n            cmd_audio = '';\n        }\n\n        if(null !== video)\n        {\n            map += '-map 0:' + video.index;\n            map += ' '\n        }\n        else\n        {\n            cmd_video = '';\n        }\n\n        if(null !== video && null !== audio)\n        {\n            cmd_encode = cmd_encode.replace('$(video)$(audio)', '$(video) $(audio)');\n        }\n\n        cmd_encode = cmd_encode.replace('$(map)', map);\n        cmd_encode = cmd_encode.replace('$(video)', cmd_video);\n        cmd_encode = cmd_encode.replace('$(audio)', cmd_audio);\n\n        cmd_encode = cmd_encode.replace('$(width)', config.width);\n        cmd_encode = cmd_encode.replace('$(height)', config.height);\n\n        cmd_encode = cmd_encode.replace(/\\$\\(video_bitrate\\)/g, config.video_bitrate);\n        \n        \n\n        cmd_encode = cmd_encode.replace(/\\$\\(ab\\)/g, config.audio_bitrate);\n\n        dbg(propertyBag.output_dir);\n\n        const output_file = propertyBag.output_dir + '/encoded_' + config.video_bitrate + '.mp4';\n\n        dbg(output_file);\n        cmd_encode = cmd_encode.replace('$(output_file)', output_file);\n       \n        propertyBag.quality = { file : output_file, video_bitrate: config.video_bitrate} ;\n\n        let j = parse(cmd_encode); \n\n        //propertyBag.cmd = cmd_encode;\n\n        dbg(cmd_encode);\n\n        propertyBag.config.args = j;\n\n        cmd_encode\n\n","height":720,"width":1280,"video_bitrate":2000,"audio_bitrate":128},"type":"code","asOf":null,"lease_time":null,"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1280:h=720\" -codec:v libx264 -profile:v high -level 31 -b:v 2000k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 2000k -maxrate 2000k -bufsize 2000k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_2000.mp4\"","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:56:15.451Z","message":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1280:h=720\" -codec:v libx264 -profile:v high -level 31 -b:v 2000k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 2000k -maxrate 2000k -bufsize 2000k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_2000.mp4\"","success":true}],"created":null,"modified":"2018-12-06T15:56:15.451Z","propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=1280:h=720\" -codec:v libx264 -profile:v high -level 31 -b:v 2000k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 2000k -maxrate 2000k -bufsize 2000k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_2000.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=1280:h=720","-codec:v","libx264","-profile:v","high","-level","31","-b:v","2000k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","2000k","-maxrate","2000k","-bufsize","2000k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_2000.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffprobe version N-81872-gbe1d324 Copyright (c) 2007-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : 512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, 25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_2000.mp4","video_bitrate":2000}},"stop_on_error":true,"children_id":["002558243058-0001/002558243058-0031"],"external_type":"../operation/user/code","processor_name":"HER17842","processor_work_id":11},{"id":"002558243058-0001/002558243058-0025","name":"ENCODE GEN-2","config":{"cmd":"ffmpeg","args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=512:h=288","-codec:v","libx264","-profile:v","high","-level","31","-b:v","320k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","320k","-maxrate","320k","-bufsize","320k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4"],"code":"\n            \n            if(config.args == null){\n                 throw new Error('null args');\n            }\n\n            if(config.args.length === 0){\n                throw new Error('0 args');\n            }\n\n            if(/$(video_bitrate)/.test(propertyBag.parent.result))\n            {\n                throw new Error('no video bitrate set');\n            }\n                 \n            JSON.stringify(config.args) \n            "},"type":"execute","asOf":null,"lease_time":null,"result":"","completed":true,"succeeded":true,"executed":true,"history":[{"date":"2018-12-06T15:56:28.459Z","message":"","success":true}],"created":null,"modified":"2018-12-06T15:56:28.459Z","propertyBag":{"parent":{"result":"-i \"C:/Users/a.surra/.node_play/uploader/T7.MP4\" -map 0:1 -map 0:0 -vf \"scale=w=512:h=288\" -codec:v libx264 -profile:v high -level 31 -b:v 320k -r 25 -g 50 -sc_threshold 0 -x264opts ratetol=0.1 -minrate 320k -maxrate 320k -bufsize 320k -b:a 128k -codec:a aac -profile:a aac_low -ar 44100 -ac 2 -y \"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4\"","succeeded":true},"original":{"args":[]},"config":{"args":["-i","C:/Users/a.surra/.node_play/uploader/T7.MP4","-map","0:1","-map","0:0","-vf","scale=w=512:h=288","-codec:v","libx264","-profile:v","high","-level","31","-b:v","320k","-r","25","-g","50","-sc_threshold","0","-x264opts","ratetol=0.1","-minrate","320k","-maxrate","320k","-bufsize","320k","-b:a","128k","-codec:a","aac","-profile:a","aac_low","-ar","44100","-ac","2","-y","C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4"]},"input_file":"C:/Users/a.surra/.node_play/uploader/T7.MP4","output_dir":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4","execute":{"code":0,"signal":null,"output":{"console":[],"err":["ffmpeg version N-81872-gbe1d324 Copyright (c) 2000-2016 the FFmpeg developers\r\n  built with gcc 5.4.0 (GCC)\r\n","  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-dxva2 --enable-libmfx --enable-nvenc --enable-avisynth --enable-bzlib --enable-libebur128 --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenh264 --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib\r\n  libavutil      55. 32.100 / 55. 32.100\r\n  libavcodec     57. 60.101 / 57. 60.101\r\n  libavformat    57. 51.102 / 57. 51.102\r\n  libavdevice    57.  0.102 / 57.  0.102\r\n  libavfilter     6. 63.100 /  6. 63.100\r\n  libswscale      4.  1.100 /  4.  1.100\r\n  libswresample   2.  2.100 /  2.  2.100\r\n  libpostproc    54.  0.100 / 54.  0.100\r\n","Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:/Users/a.surra/.node_play/uploader/T7.MP4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : ","512\r\n    compatible_brands: isomiso2avc1mp41\r\n    creation_time   : 2013-02-20T19:33:17.000000Z\r\n  Duration: 00:04:59.92, start: 0.080000, bitrate: 1030 kb/s\r\n    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 894 kb/s, ","25 fps, 25 tbr, 1k tbn, 20000k tbc (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER","\r\n    Stream #0:1(ita): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n","[libx264 @ 0000000003a53620] using SAR=1/1\r\n","[libx264 @ 0000000003a53620] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX FMA3 AVX2 LZCNT BMI2\r\n","[libx264 @ 0000000003a53620] profile High, level 3.1\r\n","[libx264 @ 0000000003a53620] 264 - core 148 r2721 72d53ab - H.264/MPEG-4 AVC codec - Copyleft 2003-2016 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=9 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=50 keyint_min=5 scenecut=0 intra_refresh=0 rc_lookahead=40 rc=cbr mbtree=1 bitrate=320 ratetol=0.1 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 vbv_maxrate=320 vbv_bufsize=320 nal_hrd=none filler=0 ip_ratio=1.40 aq=1:1.00\r\n","Output #0, mp4, to 'C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4':\r\n  Metadata:\r\n    major_brand     : isom\r\n    minor_version   : ","512\r\n    compatible_brands: isomiso2avc1mp41\r\n    encoder         : Lavf57.51.102\r\n    Stream #0:0(ita)",": Audio: aac (LC) ([64][0][0][0] / 0x0040), 44100 Hz, stereo, fltp, 128 kb/s (default)\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n","      encoder         : Lavc57.60.101 aac\r\n    Stream #0:","1(eng): Video: h264 (libx264) ([33][0][0][0] / 0x0021), yuv420p, 512x288 [SAR 1:1 DAR 16:9], q=-1--1, 320 kb/s, 25 fps, 12800 tbn, 25 tbc (default)","\r\n    Metadata:\r\n      creation_time   : 2013-02-20T19:33:17.000000Z\r\n      handler_name    : FOUNDATION MEDIA HANDLER\r\n      encoder         : Lavc57.60.101 libx264\r\n    Side data:\r\n      cpb: bitrate max/min/avg: 320000/0/320000 buffer size: 320000 vbv_delay: -1\r\nStream mapping:\r\n  Stream #0:1 -> #0:0 (aac (native) -> aac (native))\r\n  Stream #0:0 -> #0:1 (h264 (native) -> h264 (libx264))\r\nPress [q] to stop, [?] for help\r\n","frame=  119 fps=0.0 q=22.0 size=     121kB time=00:00:05.09 bitrate= 195.2kbits/s speed=10.2x    \r","frame=  248 fps=248 q=17.0 size=     330kB time=00:00:10.21 bitrate= 264.4kbits/s speed=10.2x    \r","frame=  355 fps=236 q=32.0 size=     547kB time=00:00:14.52 bitrate= 308.6kbits/s speed=9.67x    \r","frame=  450 fps=225 q=31.0 size=     742kB time=00:00:18.28 bitrate= 332.2kbits/s speed=9.12x    \r","frame=  554 fps=221 q=32.0 size=     958kB time=00:00:22.45 bitrate= 349.4kbits/s speed=8.97x    \r","frame=  642 fps=214 q=36.0 size=    1135kB time=00:00:26.05 bitrate= 357.0kbits/s speed=8.67x    \r","frame=  764 fps=218 q=36.0 size=    1376kB time=00:00:30.84 bitrate= 365.5kbits/s speed= 8.8x    \r","frame=  857 fps=214 q=32.0 size=    1564kB time=00:00:34.64 bitrate= 369.9kbits/s speed=8.65x    \r","frame=  971 fps=215 q=30.0 size=    1789kB time=00:00:39.12 bitrate= 374.7kbits/s speed=8.68x    \r","frame= 1065 fps=213 q=33.0 size=    1977kB time=00:00:42.93 bitrate= 377.1kbits/s speed=8.57x    \r","frame= 1173 fps=213 q=30.0 size=    2195kB time=00:00:47.31 bitrate= 379.9kbits/s speed=8.59x    \r","frame= 1309 fps=218 q=28.0 size=    2451kB time=00:00:52.66 bitrate= 381.3kbits/s speed=8.76x    \r","frame= 1392 fps=214 q=24.0 size=    2612kB time=00:00:55.98 bitrate= 382.3kbits/s speed=8.59x    \r","frame= 1476 fps=210 q=25.0 size=    2774kB time=00:00:59.34 bitrate= 382.9kbits/s speed=8.45x    \r","frame= 1569 fps=209 q=28.0 size=    2953kB time=00:01:03.04 bitrate= 383.7kbits/s speed=8.38x    \r","frame= 1669 fps=208 q=27.0 size=    3164kB time=00:01:07.07 bitrate= 386.4kbits/s speed=8.35x    \r","frame= 1763 fps=206 q=29.0 size=    3356kB time=00:01:10.83 bitrate= 388.1kbits/s speed= 8.3x    \r","frame= 1860 fps=206 q=26.0 size=    3561kB time=00:01:14.73 bitrate= 390.4kbits/s speed=8.27x    \r","frame= 1960 fps=205 q=24.0 size=    3759kB time=00:01:18.77 bitrate= 390.9kbits/s speed=8.26x    \r","frame= 2046 fps=204 q=22.0 size=    3914kB time=00:01:22.16 bitrate= 390.3kbits/s speed=8.18x    \r","frame= 2146 fps=203 q=23.0 size=    4110kB time=00:01:26.11 bitrate= 391.0kbits/s speed=8.16x    \r","frame= 2245 fps=203 q=24.0 size=    4302kB time=00:01:30.11 bitrate= 391.1kbits/s speed=8.14x    \r","frame= 2348 fps=203 q=29.0 size=    4510kB time=00:01:34.23 bitrate= 392.1kbits/s speed=8.14x    \r","frame= 2434 fps=201 q=31.0 size=    4693kB time=00:01:37.66 bitrate= 393.6kbits/s speed=8.08x    \r","frame= 2534 fps=201 q=29.0 size=    4891kB time=00:01:41.68 bitrate= 394.1kbits/s speed=8.08x    \r","frame= 2624 fps=201 q=31.0 size=    5067kB time=00:01:45.25 bitrate= 394.4kbits/s speed=8.04x    \r","frame= 2720 fps=200 q=29.0 size=    5261kB time=00:01:49.12 bitrate= 394.9kbits/s speed=8.03x    \r","frame= 2813 fps=200 q=29.0 size=    5442kB time=00:01:52.83 bitrate= 395.1kbits/s speed=8.01x    \r","frame= 2910 fps=199 q=27.0 size=    5637kB time=00:01:56.73 bitrate= 395.6kbits/s speed=   8x    \r","frame= 3014 fps=200 q=28.0 size=    5850kB time=00:02:00.83 bitrate= 396.6kbits/s speed=   8x    \r","frame= 3114 fps=200 q=33.0 size=    6053kB time=00:02:04.83 bitrate= 397.2kbits/s speed=   8x    \r","frame= 3218 fps=200 q=30.0 size=    6260kB time=00:02:09.04 bitrate= 397.4kbits/s speed=8.01x    \r","frame= 3337 fps=201 q=24.0 size=    6489kB time=00:02:13.77 bitrate= 397.4kbits/s speed=8.05x    \r","frame= 3461 fps=202 q=26.0 size=    6745kB time=00:02:18.76 bitrate= 398.2kbits/s speed=8.11x    \r","frame= 3578 fps=203 q=25.0 size=    6959kB time=00:02:23.43 bitrate= 397.4kbits/s speed=8.13x    \r","frame= 3666 fps=202 q=26.0 size=    7146kB time=00:02:26.95 bitrate= 398.3kbits/s speed= 8.1x    \r","frame= 3769 fps=202 q=27.0 size=    7350kB time=00:02:31.09 bitrate= 398.5kbits/s speed=8.11x    \r","frame= 3871 fps=202 q=25.0 size=    7544kB time=00:02:35.14 bitrate= 398.3kbits/s speed= 8.1x    \r","frame= 3972 fps=202 q=29.0 size=    7750kB time=00:02:39.21 bitrate= 398.8kbits/s speed= 8.1x    \r","frame= 4073 fps=202 q=29.0 size=    7959kB time=00:02:43.30 bitrate= 399.3kbits/s speed=8.11x    \r","frame= 4172 fps=202 q=28.0 size=    8161kB time=00:02:47.16 bitrate= 399.9kbits/s speed= 8.1x    \r","frame= 4273 fps=202 q=28.0 size=    8353kB time=00:02:51.23 bitrate= 399.6kbits/s speed=8.09x    \r","frame= 4376 fps=202 q=25.0 size=    8554kB time=00:02:55.32 bitrate= 399.7kbits/s speed=8.09x    \r","frame= 4470 fps=202 q=30.0 size=    8753kB time=00:02:59.16 bitrate= 400.2kbits/s speed=8.08x    \r","frame= 4558 fps=201 q=31.0 size=    8941kB time=00:03:02.64 bitrate= 401.0kbits/s speed=8.06x    \r","frame= 4652 fps=201 q=31.0 size=    9131kB time=00:03:06.38 bitrate= 401.3kbits/s speed=8.05x    \r","frame= 4748 fps=201 q=31.0 size=    9337kB time=00:03:10.29 bitrate= 402.0kbits/s speed=8.04x    \r","frame= 4842 fps=200 q=31.0 size=    9533kB time=00:03:14.01 bitrate= 402.5kbits/s speed=8.03x    \r","frame= 4940 fps=200 q=29.0 size=    9731kB time=00:03:17.92 bitrate= 402.8kbits/s speed=8.02x    \r","frame= 5023 fps=200 q=27.0 size=    9903kB time=00:03:21.20 bitrate= 403.2kbits/s speed=7.99x    \r","frame= 5119 fps=199 q=28.0 size=   10102kB time=00:03:25.06 bitrate= 403.6kbits/s speed=7.99x    \r","frame= 5218 fps=199 q=29.0 size=   10300kB time=00:03:29.03 bitrate= 403.6kbits/s speed=7.99x    \r","frame= 5335 fps=200 q=25.0 size=   10532kB time=00:03:33.69 bitrate= 403.7kbits/s speed=8.01x    \r","frame= 5453 fps=201 q=25.0 size=   10754kB time=00:03:38.49 bitrate= 403.2kbits/s speed=8.04x    \r","frame= 5556 fps=201 q=26.0 size=   10976kB time=00:03:42.60 bitrate= 403.9kbits/s speed=8.04x    \r","frame= 5642 fps=200 q=25.0 size=   11129kB time=00:03:45.99 bitrate= 403.4kbits/s speed=8.02x    \r","frame= 5722 fps=199 q=28.0 size=   11307kB time=00:03:49.24 bitrate= 404.1kbits/s speed=7.99x    \r","frame= 5810 fps=199 q=29.0 size=   11493kB time=00:03:52.67 bitrate= 404.6kbits/s speed=7.97x    \r","frame= 5884 fps=198 q=24.0 size=   11640kB time=00:03:55.72 bitrate= 404.5kbits/s speed=7.93x    \r","frame= 5954 fps=197 q=27.0 size=   11783kB time=00:03:58.53 bitrate= 404.7kbits/s speed= 7.9x    \r","frame= 6029 fps=196 q=28.0 size=   11927kB time=00:04:01.46 bitrate= 404.6kbits/s speed=7.86x    \r","frame= 6118 fps=196 q=29.0 size=   12117kB time=00:04:05.01 bitrate= 405.1kbits/s speed=7.85x    \r","frame= 6196 fps=195 q=26.0 size=   12268kB time=00:04:08.15 bitrate= 405.0kbits/s speed=7.82x    \r","frame= 6291 fps=195 q=28.0 size=   12463kB time=00:04:11.95 bitrate= 405.2kbits/s speed=7.82x    \r","frame= 6368 fps=194 q=24.0 size=   12618kB time=00:04:15.02 bitrate= 405.3kbits/s speed=7.79x    \r","frame= 6442 fps=194 q=24.0 size=   12756kB time=00:04:17.99 bitrate= 405.0kbits/s speed=7.76x    \r","frame= 6520 fps=193 q=28.0 size=   12918kB time=00:04:21.11 bitrate= 405.3kbits/s speed=7.73x    \r","frame= 6595 fps=192 q=27.0 size=   13071kB time=00:04:24.13 bitrate= 405.4kbits/s speed=7.71x    \r","frame= 6698 fps=193 q=26.0 size=   13268kB time=00:04:28.25 bitrate= 405.2kbits/s speed=7.71x    \r","frame= 6791 fps=193 q=27.0 size=   13457kB time=00:04:31.95 bitrate= 405.4kbits/s speed=7.71x    \r","frame= 6892 fps=193 q=32.0 size=   13671kB time=00:04:35.99 bitrate= 405.8kbits/s speed=7.71x    \r","frame= 6968 fps=192 q=33.0 size=   13836kB time=00:04:39.01 bitrate= 406.2kbits/s speed=7.69x    \r","frame= 7050 fps=192 q=33.0 size=   13996kB time=00:04:42.29 bitrate= 406.1kbits/s speed=7.67x    \r","frame= 7131 fps=191 q=28.0 size=   14167kB time=00:04:45.56 bitrate= 406.4kbits/s speed=7.66x    \r","frame= 7202 fps=191 q=30.0 size=   14303kB time=00:04:48.40 bitrate= 406.3kbits/s speed=7.63x    \r","frame= 7281 fps=190 q=34.0 size=   14477kB time=00:04:51.56 bitrate= 406.7kbits/s speed=7.62x    \r","frame= 7375 fps=190 q=29.0 size=   14662kB time=00:04:55.32 bitrate= 406.7kbits/s speed=7.61x    \r","frame= 7450 fps=190 q=32.0 size=   14798kB time=00:04:58.27 bitrate= 406.4kbits/s speed=7.59x    \r","frame= 7500 fps=188 q=-1.0 Lsize=   15280kB time=00:04:59.98 bitrate= 417.3kbits/s speed= 7.5x    \r\nvideo:10220kB audio:4792kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 1.787546%\r\n","[aac @ 0000000003a52840] Qavg: 556.544\r\n","[libx264 @ 0000000003a53620] frame I:150   Avg QP:22.04  size: 10830\r\n[libx264 @ 0000000003a53620] frame P:2258  Avg QP:26.18  size:  2579\r\n","[libx264 @ 0000000003a53620] frame B:5092  Avg QP:30.01  size:   593\r\n[libx264 @ 0000000003a53620] consecutive B-frames:  5.8%  8.7%  7.2% 78.3%\r\n[libx264 @ 0000000003a53620] mb I  I16..4: 13.9% 59.6% 26.5%\r\n[libx264 @ 0000000003a53620] mb P  I16..4:  4.2%  8.6%  2.0%  P16..4: 38.7% 16.3%  7.4%  0.0%  0.0%    skip:22.9%\r\n[libx264 @ 0000000003a53620]"," ","mb B  I16..4:  0.3%  0.4%  0.0%  B16..8: 35.8%  4.8%  0.6%  direct: 0.9%  skip:57.1%  L0:40.5% L1:55.7% BI: 3.7%\r\n[libx264 @ 0000000003a53620] ","8x8 transform intra:58.1% inter:81.9%\r\n","[libx264 @ 0000000003a53620] coded y,uvDC,uvAC intra: 56.0% 71.4% 30.8% inter: 9.0% 14.5% 0.2%\r\n","[libx264 @ 0000000003a53620] i16 v,h,dc,p: 49% 27%  4% 20%\r\n","[libx264 @ 0000000003a53620] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 25% 20% 16%  5%  6%  7%  7%  7%  7%\r\n[libx264 @ 0000000003a53620]"," i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 31% 25% 12%  4%  6%  6%  6%  5%  4%\r\n[libx264 @ 0000000003a53620] i8c dc,h,v,p: 49% 21% 24%  6%\r\n","[libx264 @ 0000000003a53620] ","Weighted P-Frames: Y:3.0% UV:2.1%\r\n[libx264 @ 0000000003a53620] ref P L0: 66.9% 15.8% 12.8%  4.4%  0.1%\r\n[libx264 @ 0000000003a53620] ","ref B L0: 93.2%  5.5%  1.4%\r\n[libx264 @ 0000000003a53620] ref B L1: 97.9%  2.1%\r\n[libx264 @ 0000000003a53620] kb/s:279.06\r\n"]}},"kb":"1030","duration":299.092,"streams":[{"index":"0","lang":"eng","kind":"Video","width":"1024","height":"576","bps":"894"},{"index":"1","lang":"ita","kind":"Audio","kz":"44100"}],"quality":{"file":"C:/Users/a.surra/.node_play/uploader/002558243544_T7_MP4/encoded_320.mp4","video_bitrate":320}},"stop_on_error":true,"target_type":"execute","children_id":["002558243058-0001/002558243058-0021"],"external_type":"../operation/user/execute","processor_name":"HER17842","processor_work_id":8}]